<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>DCS210 Final Project</title>
    <meta charset="utf-8" />
    <meta name="author" content="omarxinyijohn   John Mieszczanski &amp; Omar Sarr &amp; Xinyi Zhang" />
    <meta name="date" content="2021-11-30" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/core-js-2.5.3/shim.min.js"></script>
    <script src="libs/react-17.0.0/react.min.js"></script>
    <script src="libs/react-17.0.0/react-dom.min.js"></script>
    <script src="libs/reactwidget-1.0.0/react-tools.js"></script>
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/reactable-binding-0.2.3/reactable.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# DCS210 Final Project
## Exploring COVID-19 Data
### omarxinyijohn <br> John Mieszczanski &amp; Omar Sarr &amp; Xinyi Zhang
### Bates College
### 2021-11-30

---









### Introduction

Reported first in December, 2019, the COVID-19 pandemic constitutes the largest global public health crisis in a century, with daunting health and socioeconomic challenges. In the United States alone, more than 700,000 people have lost their lives due to the public health crisis. The progress in vaccination rates, as well as the spread of Delta variant, added more nuances to the overall situation.

### Overall Goal

In this project, we focus on the COVID-19 data in the U.S. We aim to explore:

- The fluctuations of deaths and cases across time since January, 2020

- Trying to predict the number of daily new deaths from daily new cases
    
- The potential correlation/relationship between seasons and deaths and cases

- The potential correlation/relationship between vaccination rates and deaths and cases across time

---

### COVID-19 Cases and Deaths - The Beginning
On January 22nd, 2020, the CDC began tracking daily COVID19 cases and deaths
across the United States and its territories. Eventually, on March 11th, 2020,
WHO declared COVID-19 a global pandemic. This day also coincided with the NBA
shutting down indefinitely. Two days later, Bates College announced they would 
be sending us home!

How do these two key dates compare the worst day(s) of the pandemic?
<div id="htmlwidget-88221ae915a96c0edd72" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-88221ae915a96c0edd72">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"submission_date":["2021-01-13","2021-01-06","2020-03-13","2020-03-11","2020-01-22"],"total_new_cases":[232342,286542,1211,796,7],"total_new_deaths":[4095,4040,10,14,0],"total_cases":[22914389,21284925,6750,4464,7],"total_deaths":[388855,363853,296,279,0]},"columns":[{"accessor":"submission_date","name":"submission_date","type":"Date"},{"accessor":"total_new_cases","name":"total_new_cases","type":"numeric"},{"accessor":"total_new_deaths","name":"total_new_deaths","type":"numeric"},{"accessor":"total_cases","name":"total_cases","type":"numeric"},{"accessor":"total_deaths","name":"total_deaths","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"b6435a103110c66afc4fb2fd4955db14","key":"b6435a103110c66afc4fb2fd4955db14"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>




---
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
p {margin-top: 0.5em ;
   margin-bottom: 1em ;}
h3 {margin-top: 0.5em ;
   margin-bottom: 0.5em ;}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;COVID-19 Cases and Deaths - How did they evolve with time?&lt;/h3&gt;
&lt;p&gt;Throughout this pandemic, we have experienced periods of low cases and deaths and periods of high cases and deaths. These ebbs and flows are typically called "waves". Our first goal was to visualize the "waves" of the pandemic - when were things the worst and when did things seem to be better?&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;img src="presentation_files/figure-html/cases-vs-time-1.png" title="Scatterplot of daily new cases versus time where we show the various ebbs and flows of COVID cases." alt="Scatterplot of daily new cases versus time where we show the various ebbs and flows of COVID cases."  /&gt;
---
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
p {margin-top: 0.5em ;
   margin-bottom: 1em ;}
h3 {margin-top: 0.5em ;
   margin-bottom: 0.5em ;}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;COVID-19 Cases and Deaths - How did they evolve with time?&lt;/h3&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;img src="presentation_files/figure-html/deaths-vs-time-1.png" title="Scatterplot of daily new deaths versus time where we show the various ebbs and flows of COVID deaths." alt="Scatterplot of daily new deaths versus time where we show the various ebbs and flows of COVID deaths."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
Before we use the R `ccf()` function, let's take a look at the relationship between
cases and deaths with no lag:

&lt;img src="presentation_files/figure-html/deaths-vs-cases-1.png" title="Scatterplot of daily new deaths versus daily cases where we show that there appears to be a linear relationship between the two variables." alt="Scatterplot of daily new deaths versus daily cases where we show that there appears to be a linear relationship between the two variables."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
Before we use the R `ccf()` function, let's take a look at the relationship between
cases and deaths with no lag:



&lt;img src="presentation_files/figure-html/deaths-vs-cases-line-plot-1.png" title="Scatterplot of daily new deaths versus daily cases that includes the line of best fit where we again show that there appears to be a linear relationship between the two variables, this time including the linear regression." alt="Scatterplot of daily new deaths versus daily cases that includes the line of best fit where we again show that there appears to be a linear relationship between the two variables, this time including the linear regression."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
Let's take a look at the residuals plot to assess whether a linear model is appropriate:

&lt;img src="presentation_files/figure-html/deaths-cases-residual-plot-1.png" title="Residuals scatterplot of residuals versus predicted daily new deaths where we show that the residuals for the most most are evenly spread out from zero, and thus a linear model is a good fit." alt="Residuals scatterplot of residuals versus predicted daily new deaths where we show that the residuals for the most most are evenly spread out from zero, and thus a linear model is a good fit."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
Results from the linear regression:

```
## parsnip model object
## 
## Fit time:  2ms 
## 
## Call:
## stats::lm(formula = total_new_deaths ~ total_new_cases, data = data)
## 
## Coefficients:
##     (Intercept)  total_new_cases  
##       274.67437          0.01146
```

```
## # A tibble: 1 × 12
##   r.squared adj.r.squared sigma statistic   p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.673         0.673  500.     1279. 5.83e-153     1 -4755. 9515. 9529.
## # … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;
```

The linear model is given by `y = 0.01146x + 274.67437`. This tells us that for 
each additional daily case, we expect the number of daily deaths to increase on 
average by `0.01146`. Additionally, we can see `\(R^2 = 0.673\)`, which indicates 
that about 67.3% of the variation in the daily new deaths is dependent on 
daily new cases.
---
### COVID-19 Cases and Deaths - What is the correlation?
Typically, when we are comparing two variables `\(X\)` and `\(Y\)`, we calculate the 
correlation coefficient 
`$$\rho = \frac{\sigma_{XY}}{\sigma_X\sigma_Y}$$` 
The correlation coefficient describes how one variable moves in relation to 
another. When dealing with time series data and both `\(X\)` and `\(Y\)` 
are functions of time, the time series `\(Y_t\)` might be related to past lags of 
the time series `\(X_t\)`. In other words, if our time series is discrete 
(it must be), we want to determine the relationship between `\(X_{t + h}\)` and
`\(Y_t\)` for `\(h = 0, \pm 1, \pm 2, ...\)`. The **cross correlation coefficient** is 
thus given by
`$$\rho = \frac{\sigma_{X_{t + h}Y_t}}{\sigma_{X_{t + h}}\sigma_{Y_t}}$$` 
Two things to note :

- When one or more `\(X_{t + h}\)`, with `\(h\)` *negative*, are predictors of `\(Y_t\)`, 
it is sometimes said that **x leads y**

- When one or more `\(X_{t + h}\)`, with `\(h\)` *positive*, are predictors of `\(Y_t\)`, 
it is sometimes said that **x lags y** `\(^*\)`

.footnote[
`\(^*\)` https://online.stat.psu.edu/stat510/lesson/8/8.2
]
---
### COVID-19 Cases and Deaths - What is the correlation?
&lt;img src="presentation_files/figure-html/deaths-cases-cross-correlation-1.png" title="Cross correlation plot of daily new cases and daily new deaths where we show that deaths appear to lag cases by approximately 7 days." alt="Cross correlation plot of daily new cases and daily new deaths where we show that deaths appear to lag cases by approximately 7 days."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
&lt;img src="presentation_files/figure-html/deaths-cases-cross-correlation-zoom-1.png" title="Zoomed in cross correlation plot of daily new cases and daily new deaths where we show that deaths appear to lag cases by approximately 7 days." alt="Zoomed in cross correlation plot of daily new cases and daily new deaths where we show that deaths appear to lag cases by approximately 7 days."  /&gt;
---
### COVID-19 Cases and Deaths - What is the correlation?
<div id="htmlwidget-30e61610eeea517077ee" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-30e61610eeea517077ee">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"lag":[-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"CCF":[0.615668424623971,0.606773140455285,0.59186688302889,0.593973717825131,0.618641552254152,0.659613299285235,0.70125876571578,0.722280253922383,0.708958451876537,0.687850806985028,0.687962957595549,0.711616677481224,0.754171830561287,0.799068675949353,0.820502227153397,0.796409771368472,0.763673282639324,0.752818541854009,0.768960473702557,0.803219475801107,0.840492750961459,0.852195623010247,0.828596579563542,0.79344775594735,0.779349918908669,0.787212753058398,0.815599374576751,0.847000704762521,0.855138637319276]},"columns":[{"accessor":"lag","name":"lag","type":"numeric"},{"accessor":"CCF","name":"CCF","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"73cb36252ca6b8200959be914ee4eb77","key":"73cb36252ca6b8200959be914ee4eb77"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
---
### COVID-19 Vaccinations Over Time
Now let's take a look at how the number people of vaccinated in the United States 
has evolved with time:


&lt;img src="presentation_files/figure-html/vaccinated-vs-time-plot-1.png" title="Scatterplot of percent of US Population fully vaccinated versus time which shows the stages of increase since the vaccination campaign began in the United States." alt="Scatterplot of percent of US Population fully vaccinated versus time which shows the stages of increase since the vaccination campaign began in the United States."  /&gt;
---
### COVID-19 Vaccinations Over Time
Although the total population of the US is only about ~55% vaccinated as of early 
October, 2021, this does not paint a full picture. Let's break down this percentage
by age group:

&lt;img src="presentation_files/figure-html/vaccinated-vs-time-facet-1.png" title="Scatterplots of percent of US Population fully vaccinated versus time faced by age group which shows the differences in percentage vaccinated by age group (i.e. older populations have higher percentages)." alt="Scatterplots of percent of US Population fully vaccinated versus time faced by age group which shows the differences in percentage vaccinated by age group (i.e. older populations have higher percentages)."  /&gt;
---
### Exploring the Relationship Between Vaccinations and Cases/Deaths
Next, let's take a look at how vaccinations and deaths have evolved over time
in conjunction with one another:



&lt;img src="presentation_files/figure-html/dual-vaccine-deaths-plot-1.png" title="Dual scatterplot of total number of US Population fully vaccinated versus time and total number of COVID deaths versus time which shows the stages of both deaths and vaccinations in conjunction." alt="Dual scatterplot of total number of US Population fully vaccinated versus time and total number of COVID deaths versus time which shows the stages of both deaths and vaccinations in conjunction."  /&gt;
---
### Exploring the Relationship Between Vaccinations and Cases/Deaths


&lt;img src="presentation_files/figure-html/vaccines-deaths-cross-correlation2-1.png" title="Cross correlation plots of total population fully vaccinated and daily new deaths which seems to show that a decrease in deaths lags about 65 days behind an increase in vaccinations." alt="Cross correlation plots of total population fully vaccinated and daily new deaths which seems to show that a decrease in deaths lags about 65 days behind an increase in vaccinations."  /&gt;
---
### Exploring the Relationship Between Vaccinations and Cases/Deaths
&lt;img src="presentation_files/figure-html/vaccines-deaths-cross-correlation-zoom-1.png" title="Zoomed in cross correlation plots of total population fully vaccinated and daily new deaths which seems to show that a decrease in deaths lags about 65 days behind an increase in vaccinations." alt="Zoomed in cross correlation plots of total population fully vaccinated and daily new deaths which seems to show that a decrease in deaths lags about 65 days behind an increase in vaccinations."  /&gt;
---
### Exploring the Relationship Between Vaccinations and Cases/Deaths
<div id="htmlwidget-5e4d6b0da511841a85e3" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5e4d6b0da511841a85e3">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"lag":[-100,-99,-98,-97,-96,-95,-94,-93,-92,-91,-90,-89,-88,-87,-86,-85,-84,-83,-82,-81,-80,-79,-78,-77,-76,-75,-74,-73,-72,-71,-70,-69,-68,-67,-66,-65,-64,-63,-62,-61,-60,-59,-58,-57,-56,-55,-54,-53,-52,-51,-50,-49,-48,-47,-46,-45,-44,-43,-42,-41,-40,-39,-38,-37,-36,-35,-34,-33,-32,-31,-30,-29,-28,-27,-26,-25,-24,-23,-22,-21,-20,-19,-18,-17,-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"CCF":[-0.213248381380957,-0.217738907213843,-0.221566702904557,-0.225477982033781,-0.229586793617756,-0.233048988684151,-0.237652421344898,-0.242609425352485,-0.247552933009512,-0.251705927720915,-0.25531451810164,-0.259276380470779,-0.262376453339252,-0.266710820519255,-0.271186004412279,-0.274768191197299,-0.277260332341809,-0.279712017230907,-0.28222493253776,-0.284730238455088,-0.288307875274155,-0.292305342146084,-0.295418333116981,-0.297886975700913,-0.299322966862015,-0.301385820654071,-0.302772915743377,-0.304970087620152,-0.307561156284075,-0.309195673094132,-0.309497386545392,-0.310195179419955,-0.3105034843543,-0.310462463962311,-0.311364849994302,-0.312874668167242,-0.312718950160766,-0.310797197600129,-0.308513865131956,-0.306175492005488,-0.302859833878696,-0.301031108514897,-0.300313129696181,-0.297679937719046,-0.292855640880998,-0.287724904388651,-0.282431257384573,-0.275389397052806,-0.271294113316808,-0.268499115744833,-0.264715536585255,-0.257188853369181,-0.24683210217485,-0.238044644329851,-0.227453656606116,-0.220460278301245,-0.216337256769057,-0.209221644272566,-0.197511952846254,-0.185548597996994,-0.172924083901521,-0.159197567454319,-0.149728744089115,-0.14272123014025,-0.134668377081324,-0.12251134287058,-0.108228017467368,-0.0934073110990228,-0.0789116371317118,-0.0693815529336841,-0.062489137608472,-0.0565906538228863,-0.0461361935153978,-0.030841885939028,-0.0145755676866547,0.0024847573280493,0.0128670500672548,0.0195616393053635,0.0269817711386626,0.0443417961730321,0.0600228483604656,0.0744530046338804,0.0905079129519432,0.0998699446921936,0.105218332752197,0.11239243637139,0.127129714088622,0.140983552782672,0.154530559608397,0.170163510389643,0.177033998268327,0.180218372839912,0.186778243904811,0.199540861364867,0.215160654361916,0.227846682904296,0.242752607192807,0.248199062134119,0.249684571620469,0.253830482650125,0.268829697421208,0.288410506687825,0.297585846754769,0.300396573031002,0.305353498306544,0.31372723091128,0.324737655052863,0.333527780810887,0.342682836038088,0.346922863481406,0.347747923637613,0.349792548459522,0.35566881316532,0.360212870316439,0.361843981139554,0.370827795375333,0.374362694090239,0.374327387533081,0.375238218849525,0.378111665204449,0.383518141703877,0.387304613519141,0.39353291636252,0.396338998950925,0.395445090840667,0.396513785291906,0.400176108344763,0.405972572626998,0.408809456127532,0.411855430336237,0.415065615470189,0.414457766139951,0.412614748022237,0.416801878873492,0.420796830744878,0.42467968565996,0.428995953258749,0.43181561803205,0.430759971423945,0.431941120312133,0.437193165816888,0.441034348511068,0.444823972977834,0.450768579131295,0.453067408649812,0.453303080449016,0.454119481428776,0.45928188599363,0.463080445619676,0.466986628580403,0.473424922647656,0.477062166560483,0.476458002356054,0.477272823737288,0.478641874321376,0.484096105195811,0.487885777669509,0.492591918834224,0.493638204421527,0.492425959092883,0.492723755852608,0.496734089093231,0.499305393369647,0.501276020274371,0.505966228045238,0.506678806187139,0.504525790496263,0.502846276212151,0.504770432890873,0.507196294743317,0.508054221354938,0.511027530288188,0.50960256101898,0.507616785015745,0.505128783945945,0.506241663239969,0.506310423489201,0.505121219814794,0.506200900887701,0.503253705015605,0.497599148670306,0.493661965478604,0.491761035765903,0.489504076160172,0.487550011481658,0.486363819982571,0.481563075731147,0.47475429082566,0.467561698946985,0.461138448056947,0.456856074787155,0.45181231668865,0.449042531062344,0.44203778882033,0.433309047212647,0.425885775493286,0.417571770605893,0.409286627882858,0.401796142265858,0.394092591274254,0.385033528853741]},"columns":[{"accessor":"lag","name":"lag","type":"numeric"},{"accessor":"CCF","name":"CCF","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"f3e5d51efcc221b11eb30845437daa5f","key":"f3e5d51efcc221b11eb30845437daa5f"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
---
### Exploring the Seasonality of COVID-19
Let's explore the relationship between COVID-19 and the four seasons:


<div id="htmlwidget-9553ed80bbfd8ed1ae8e" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9553ed80bbfd8ed1ae8e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"season":["Fall","Spring","Summer","Winter"],"median_ncases":[86178,26539,45333.5,114615],"median_ndeaths":[964,663,708,2275],"mean_ncases":[94741.6428571429,32010.0706521739,55820.5217391304,111475.248062016],"mean_ndeaths":[1125,780.233695652174,719.423913043478,1860.73643410853],"sd_ncases":[50830.6077759398,19627.5833506379,43210.6982877295,92795.6783835991],"sd_ndeaths":[492.16530556308,530.913085778405,390.067634143699,1387.18077701333],"min_ncases":[23414,77,8167,0],"max_ncases":[199128,74299,187655,286542],"iqr_ncases":[90448,28182.75,45957.5,194425]},"columns":[{"accessor":"season","name":"season","type":"character"},{"accessor":"median_ncases","name":"median_ncases","type":"numeric"},{"accessor":"median_ndeaths","name":"median_ndeaths","type":"numeric"},{"accessor":"mean_ncases","name":"mean_ncases","type":"numeric"},{"accessor":"mean_ndeaths","name":"mean_ndeaths","type":"numeric"},{"accessor":"sd_ncases","name":"sd_ncases","type":"numeric"},{"accessor":"sd_ndeaths","name":"sd_ndeaths","type":"numeric"},{"accessor":"min_ncases","name":"min_ncases","type":"numeric"},{"accessor":"max_ncases","name":"max_ncases","type":"numeric"},{"accessor":"iqr_ncases","name":"iqr_ncases","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"d6f277635197c51923d123d45247998e","key":"d6f277635197c51923d123d45247998e"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>

---
### Exploring the Seasonality of COVID-19
&lt;img src="presentation_files/figure-html/seasons-ridge-plot-1.png" title="Ridges plot of cases grouped by season which shows which seasons tended to have higher case numbers." alt="Ridges plot of cases grouped by season which shows which seasons tended to have higher case numbers."  /&gt;
---
### Exploring the Seasonality of COVID-19
&lt;img src="presentation_files/figure-html/seasons-box-plot-1.png" title="Box plot of cases grouped by season which shows that the winter had the highest median number of cases, folloed by the fall, summer, and spring." alt="Box plot of cases grouped by season which shows that the winter had the highest median number of cases, folloed by the fall, summer, and spring."  /&gt;
---
### Exploring the Seasonality of COVID-19
Towards the end of this semester, we learned how to create models with 
categorical explanatory variables. Let's run a linear regression by factoring
the `season` variable:

```
## parsnip model object
## 
## Fit time:  3ms 
## 
## Call:
## stats::lm(formula = total_new_cases ~ factor(season), data = data)
## 
## Coefficients:
##          (Intercept)  factor(season)Spring  factor(season)Summer  
##                94742                -62732                -38921  
## factor(season)Winter  
##                16734
```

```
## # A tibble: 1 × 12
##   r.squared adj.r.squared  sigma statistic  p.value    df logLik    AIC    BIC
##       &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.246         0.242 54482.      67.3 1.09e-37     3 -7676. 15362. 15385.
## # … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;
```
This tells us that the average number of daily new cases in the Fall is 94,747.
It is also possible to derive the daily new cases averages for the other seasons 
from this as well. Additionally, note that `\(R^2 \approx 0.25\)`. This tells us that 
about 25% of the of the variation in the daily new cases 
is dependent on the season.
---
### Tying Seasonality into the Relationship Between Cases and Deaths
Finally, let's try to see if the relationship between deaths and cases does or
does not vary by the season. This type of analysis is equivalent to interpreting
main vs. interaction effects. We will start with the main effects:



&lt;img src="presentation_files/figure-html/seasons-main-effects-plot-1.png" title="Scatterplot of daily new deaths versus daily new cases which shows the main effects for each of the four seasons." alt="Scatterplot of daily new deaths versus daily new cases which shows the main effects for each of the four seasons."  /&gt;
---
### Tying Seasonality into the Relationship Between Cases and Deaths
Now we will view the interaction effects:

&lt;img src="presentation_files/figure-html/seasons-interaction-effects-plot-1.png" title="Scatterplot of daily new deaths versus daily new cases which shows the interaction effects for each of the four seasons." alt="Scatterplot of daily new deaths versus daily new cases which shows the interaction effects for each of the four seasons."  /&gt;
---
### Tying Seasonality into the Relationship Between Cases and Deaths

```r
deaths_cases_main_fit
```

```
## parsnip model object
## 
## Fit time:  2ms 
## 
## Call:
## stats::lm(formula = total_new_deaths ~ total_new_cases + factor(season), 
##     data = data)
## 
## Coefficients:
##          (Intercept)       total_new_cases  factor(season)Spring  
##             63.35585               0.01121             358.18337  
## factor(season)Summer  factor(season)Winter  
##             30.56139             548.22508
```
Therefore:
`$$\hat{deaths} = 63 + 0.011 * cases + 358 * spring + 31 * summer + 548 * winter$$`
---
### Tying Seasonality into the Relationship Between Cases and Deaths

```r
deaths_cases_int_fit
```

```
## parsnip model object
## 
## Fit time:  1ms 
## 
## Call:
## stats::lm(formula = total_new_deaths ~ total_new_cases * factor(season), 
##     data = data)
## 
## Coefficients:
##                          (Intercept)                       total_new_cases  
##                           301.559333                              0.008691  
##                 factor(season)Spring                  factor(season)Summer  
##                           319.137034                             85.625649  
##                 factor(season)Winter  total_new_cases:factor(season)Spring  
##                             1.975292                             -0.003707  
## total_new_cases:factor(season)Summer  total_new_cases:factor(season)Winter  
##                            -0.002740                              0.005278
```
Therefore:
`$$\hat{d} = 302 + 0.0087 * c + 319 * sp  + 87 * su + 2 * w - 0.0037 * sp * c - 0.0027 * su * c + 0.0053 * w * c$$`
---
### Tying Seasonality into the Relationship Between Cases and Deaths
Let's compare the adjusted `\(R^2\)` values:

```r
glance(deaths_cases_main_fit)
```

```
## # A tibble: 1 × 12
##   r.squared adj.r.squared sigma statistic   p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.736         0.735  450.      431. 3.37e-177     4 -4688. 9388. 9414.
## # … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;
```

```r
glance(deaths_cases_int_fit)
```

```
## # A tibble: 1 × 12
##   r.squared adj.r.squared sigma statistic   p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.784         0.781  409.      319. 7.78e-200     7 -4626. 9270. 9310.
## # … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;
```
It appears that adding the `season` variable increased adjusted `\(R^2\)`, so it makes
sense to include it in our model.
---
### Conclusions and Takeaways
- There is a positive linear relationship between cases and deaths
- Deaths are most correlated to cases with a 7 day lag
- Vaccination percentages vary widely by age group
- There is an approximately 65 day lag until daily new deaths and percent
of population fully vaccinated becomes negatively correlated. 
- There is a relationship between the season and COVID-19 cases/deaths numbers
- Knowing the season improves our ability to model deaths versus cases
---
&lt;style&gt;
.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
&lt;/style&gt;
.center2[
# Questions?
]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"color": null
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
